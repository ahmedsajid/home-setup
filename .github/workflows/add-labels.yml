---
name: add-label

on:
  pull_request:
    types: [opened, synchronize, reopened, edited]
  issues:
    types: [opened]
  issue_comment:

jobs:
  apply-label:
    runs-on: ubuntu-latest
    steps:
      - name: add-label
        uses: actions/github-script@v4
        with:
          script: |
            console.log(context)
            if (context.payload.pull_request) {
              const title = context.payload.pull_request.title
              console.log(title)
              if (title.startsWith === 'bug:') {
                github.issues.addLabels({
                  issue_number: context.issue.number,
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  labels: ['bug']
                })
              } else {
                github.issues.addLabels({
                  issue_number: context.issue.number,
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  labels: ['enhancement']
                })
              }
            }
